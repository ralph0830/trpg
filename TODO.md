# AI TRPG 프로젝트 TODO 리스트

이 문서는 `PRD.md`를 기반으로 AI TRPG 프로젝트의 개발 작업을 세분화한 목록입니다.

## 1. 프로젝트 초기 설정 (Infrastructure) ✅ 

- [x] **기술 스택 확정**
    - [x] 백엔드: Node.js + Express + Socket.IO
    - [x] 프론트엔드: React 19 + Vite
    - [x] 데이터베이스: PostgreSQL
- [x] **저장소(Repository) 생성 및 초기 설정**
    - [x] Git 저장소 생성
    - [x] 프로젝트 구조(디렉터리) 초기화
- [ ] **개발 환경 구축**
    - [x] 기본 환경 변수 설정 (.env.example)
    - [ ] n8n 워크플로우 자동화 환경 설정
    - [ ] Gemini API 키 발급 및 연동 테스트

## 2. 백엔드 개발 (Backend)

- [x] **기본 서버 구축**
    - [x] Express 서버 프레임워크 설정
    - [x] Socket.IO WebSocket 서버 설정
    - [x] PostgreSQL 연결풀 구성
- [ ] **데이터베이스 설계 및 연동**
    - [ ] DB 스키마 정의 (게임 세션, 캐릭터, 인벤토리, 맵 데이터)
    - [ ] DB 마이그레이션 스크립트 작성
    - [ ] DB 연결 및 기본 CRUD 로직 구현
- [ ] **멀티플레이어 시스템 구현**
    - [ ] 4인 파티 생성 및 관리 로직
    - [ ] 게임 세션 시작 및 종료 API
    - [ ] 플레이어 접속/이탈 감지 및 처리
- [ ] **게임 로직 구현**
    - [ ] 캐릭터 능력치(HP, MP) 관리 API
    - [ ] 인벤토리 아이템 추가/삭제/사용 로직
    - [ ] 맵 데이터(2D 배열) 관리 및 전송 API
    - [ ] 텍스트 기반 전투 시스템 로직 (주사위, 공/방 처리)
- [ ] **실시간 통신 (WebSocket)**
    - [ ] 플레이어 간 채팅 메시지 브로드캐스팅
    - [ ] AI(GM) 메시지 전송
    - [ ] 동적 맵 타일 변경 이벤트 전송

## 3. AI 에이전트 개발 (AI Agent)

- [ ] **LLM 연동 모듈 개발**
    - [ ] LLM API 호출 및 응답 처리 모듈
    - [ ] Prompt 엔지니어링 (게임 상황, 플레이어 행동 기반)
- [ ] **핵심 게임 진행 로직**
    - [ ] 플레이어 행동 해석 및 게임 이벤트 생성 로직
    - [ ] NPC 대화, 퀘스트 부여 등 동적 스토리 생성
- [ ] **게임 세계 생성 로직**
    - [ ] 타일 기반 맵(마을, 던전) 데이터 생성
    - [ ] NPC, 몬스터 등 게임 요소 동적 생성
- [ ] **로그아웃 플레이어 대체 기능**
    - [ ] AI가 플레이어 캐릭터를 대신 조작하는 로직 구현

## 4. 프론트엔드 개발 (Frontend)

- [x] **UI/UX 기본 설계**
    - [x] 3-패널 레이아웃 디자인 (Map | Status+Inventory | Chat)
- [ ] **핵심 컴포넌트 개발**
    - [x] **채팅창 컴포넌트**: 기본 UI 스켈레톤 완료
    - [x] **맵 뷰어 컴포넌트**: 기본 UI 스켈레톤 완료
    - [x] **캐릭터 상태창 컴포넌트**: 기본 UI 스켈레톤 완료
    - [x] **인벤토리 컴포넌트**: 기본 UI 스켈레톤 완료
    - [ ] **실제 게임 로직 연동**: 컴포넌트들을 실제 데이터와 연결
- [ ] **서버 연동**
    - [ ] Socket.IO 클라이언트 연결 및 실시간 데이터 처리
    - [ ] REST API를 통한 게임 데이터 요청 및 동기화
- [ ] **동적 UI 업데이트**
    - [ ] WebSocket 이벤트에 따른 맵 타일 실시간 변경
    - [ ] 전투, 아이템 사용 결과에 따른 UI 업데이트

## 5. 테스트 및 배포 (Test & Deploy)

- [ ] **단위/통합 테스트**
    - [ ] 백엔드 API 및 WebSocket 기능 테스트
    - [ ] AI 에이전트 응답 일관성 테스트
- [ ] **MVP 기능 통합 테스트**
    - [ ] 게임 시작부터 한 세션 완료까지 전체 플로우 테스트
- [ ] **배포 준비**
    - [ ] 배포 환경 설정
    - [ ] 빌드 및 배포 스크립트 작성

## 6. 다음 우선순위 작업 (Next Priority)

### Phase 1: 데이터베이스 기반 구축
- [ ] **PostgreSQL 스키마 설계**
  - [ ] 게임 세션 테이블 (sessions)
  - [ ] 플레이어 캐릭터 테이블 (characters) 
  - [ ] 인벤토리 테이블 (inventory)
  - [ ] 맵 데이터 테이블 (maps)
- [ ] **DB 마이그레이션 및 시드 데이터**
  - [ ] 초기 테이블 생성 스크립트
  - [ ] 테스트용 더미 데이터 생성

### Phase 2: 실시간 통신 구현
- [ ] **Socket.IO 이벤트 정의**
  - [ ] 플레이어 입장/퇴장 이벤트
  - [ ] 채팅 메시지 브로드캐스팅
  - [ ] 게임 상태 동기화 이벤트
- [ ] **Frontend Socket.IO 연동**
  - [ ] 실시간 채팅 기능 구현
  - [ ] 게임 상태 실시간 업데이트

### Phase 3: AI 에이전트 MVP
- [ ] **Gemini API 연동**
  - [ ] 기본 프롬프트 템플릿 설계
  - [ ] AI 응답 파싱 및 처리
- [ ] **게임 마스터 기능**
  - [ ] 간단한 스토리 생성 로직
  - [ ] 플레이어 행동 해석 및 반응

## 7. 기술 부채 및 개선 사항

- [ ] **코드 품질**
  - [ ] ESLint/Prettier 설정 통일
  - [ ] TypeScript 마이그레이션 검토
  - [ ] 에러 처리 개선
- [ ] **성능 최적화**
  - [ ] DB 쿼리 최적화
  - [ ] WebSocket 메시지 압축
  - [ ] Frontend 컴포넌트 최적화
